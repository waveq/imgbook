<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                 template="./../mytemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns="http://www.w3.org/1999/xhtml">

    <ui:define name="content">
        <h3>Dodawanie obrazka</h3>

        <h:panelGroup id="block">
            <h:panelGroup rendered="#{not imageBean.uploaded}">
                <h:form enctype="multipart/form-data">
                    <p:fileUpload fileUploadListener="#{imageBean.handleFileUpload}"
 
                                  update=":block"
                                  label="Wybierz plik lub przeciągnij go tutaj"
                                  sizeLimit="585760"
                                  allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                                  invalidSizeMessage="Maksymalny rozmiar obrazka to 0.5MB!"
                                  invalidFileMessage="Możesz przesłać tylko obrazki !"

                                  />
                    <p:growl id="messages" showDetail="true" life="5000" />
        
                </h:form>
            </h:panelGroup>

            <h:panelGroup rendered="#{imageBean.uploaded}">
                <h:form>
                    <h:panelGrid columns="2" >
                        <p:outputLabel value="Tytuł" />
                        <p:inputText id="title" value="#{imageBean.image.title}" required="true" />
                    </h:panelGrid>

                     <p:graphicImage cache="false" value="#{imageBean.uploadedImage}" width="250px" height="200px"/> 
                    <p:commandButton value="OK" ajax="true" action="#{imageBean.submit}" update=":block" />  
                </h:form>
            </h:panelGroup>
        </h:panelGroup>
             
    </ui:define>

</ui:composition>
